apply plugin: 'ank-gradle-plugin'
apply plugin: 'kotlin-kapt'
//apply plugin: 'org.ajoberstar.git-publish'

dependencies {
    implementation project(':idea-plugin')
    compile("io.arrow-kt:arrow-ank:$ARROW_VERSION") {
        exclude group: "org.jetbrains.kotlin", module: "kotlin-stdlib-jdk7"
        exclude group: "org.jetbrains.kotlin", module: "kotlin-stdlib-jdk8"
        exclude group: "org.jetbrains.kotlin", module: "kotlin-stdlib"
        // TODO: Fix arrow-ank in Arrow
        // exclude group: "org.jetbrains.kotlin", module: "kotlin-compiler"
        // exclude group: "org.jetbrains.kotlin", module: "kotlin-script-util"
    }

}

task printcp {
    doLast {
        println sourceSets.main.runtimeClasspath.each { println it }
    }
}

ank {
    source = file("${projectDir}/docs")
    target = file("${projectDir}/build/site")
    classpath = sourceSets.main.runtimeClasspath
}

//gitPublish {
//    repoUri = 'git@github.com:arrow-kt/arrow.git'
//    branch = 'gh-pages'
//
//    contents {
//        from 'build/site'
//    }
//
//    commitMessage = 'update site'
//}

compileKotlin.kotlinOptions.freeCompilerArgs += ["-Xskip-runtime-version-check"]
